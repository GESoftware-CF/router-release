cloned from https://github.com/uber-go/zap/tree/a5783ee4b216a927da8f839c45cfbf9d694e1467
